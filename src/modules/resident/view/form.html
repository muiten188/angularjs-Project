<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>{{ 'MENU.RESIDENT' | translate }}
        <small>{{ 'MENU.RESIDENT' | translate }}</small>
    </h1>
</section>
<!-- Main content -->
<section class="content">
    <div class="box">
        <div class="box-header with-border">
            <div class="col-xs-12 text-right">
                <button type="submit" class="btn btn-primary ng-binding" ng-disabled="!formApp.$dirty || !formApp.$valid" ng-click="ctrl.onSubmit()">
                    <i class="fa fa-save"></i> {{'BUTTON.SAVE'|translate}}</button>
            </div>
        </div>
        <div class="box-body">
            <form novalidate name="formApp" class="form-horizontal" ng-submit="formApp.$valid && ctrl.onSubmit()">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="thumbnail">
                            <div ngf-select="ctrl.uploadFile($file)" ng-model="files" ngf-multiple="false" ngf-allow-dir="true" class="drop-box" ngf-drag-over-class="'dragover'"
                                accept="image/*" ngf-pattern="'image/*'" style="width:100%; height: 200px;">
                                <a ng-if="ctrl.resident.avatar" href="javascript:void(0)">
                                    <sm-image img-path="{{ctrl.resident.avatar}}" img-style="width:100%; max-height: 200px;" />
                                </a>
                                <div ng-if="!ctrl.resident.avatar" style="font-size: 10em; width: 150px; margin: 0px auto; cursor: pointer">
                                    <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label for="firstname" class="col-sm-4 control-label required" ng-bind="'LABEL.RESIDENT.FIRST_NAME' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.firstname" type="text" class="form-control" name="firstname" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_FIRST_NAME' | translate}}"
                                        maxlength="100" required />
                                    <div class="box-validate">
                                        <div ng-show="formApp.firstname.$dirty && formApp.firstname.$invalid" class="text-danger">
                                            <i class="fa fa-times text-danger"></i>
                                            <span ng-show="formApp.firstname.$error.required" ng-bind="'SYSTEM.ERROR.REQUIRED' | translate"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="surname" class="col-sm-4 control-label required" ng-bind="'LABEL.RESIDENT.SUR_NAME' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.surname" type="text" class="form-control" name="surname" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_SUR_NAME' | translate}}"
                                        maxlength="100" required />
                                    <div class="box-validate">
                                        <div ng-show="formApp.surname.$dirty && formApp.surname.$invalid" class="text-danger">
                                            <i class="fa fa-times text-danger"></i>
                                            <span ng-show="formApp.surname.$error.required" ng-bind="'SYSTEM.ERROR.REQUIRED' | translate"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label for="birthday" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.BIRTHDAY' |translate"></label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="text" class="form-control" name="birthday" ng-required="false" uib-datepicker-popup="{{'dd/mm/yyyy'}}" ng-model="ctrl.resident.birthday"
                                            close-text="Close" is-open="ctrl.resident.show" />
                                        <span class="input-group-addon" ng-click="ctrl.resident.show = true">
                                            <i class="fa fa-calendar" aria-hidden="true"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="gender" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.GENDER' |translate"></label>
                                <div class="col-sm-8">
                                    <sm-gender ng-model="ctrl.resident.gender" name="gender" ng-class="form-control" sm-input="true" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label for="identifyCard" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.IDENTITY' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.identifyCard" type="text" class="form-control" name="identifyCard" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_IDENTITY' | translate}}"
                                        maxlength="50" />
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="occupation" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.JOB' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.occupation" type="text" class="form-control" name="occupation" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_JOB' | translate}}"
                                        maxlength="200" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class=" form-group col-sm-6">
                                <label for="phoneNumber" class="col-sm-4 control-label required" ng-bind="'LABEL.RESIDENT.PHONE_NUMBER_1' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.phoneNumber" type="text" class="form-control" name="phoneNumber" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_PHONE_NUMBER_1' | translate}}"
                                        maxlength="25" required />
                                    <div class="box-validate">
                                        <div ng-show="formApp.phoneNumber.$dirty && formApp.phoneNumber.$invalid" class="text-danger">
                                            <i class="fa fa-times text-danger"></i>
                                            <span ng-show="formApp.phoneNumber.$error.required" ng-bind="'SYSTEM.ERROR.REQUIRED' | translate"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="subPhoneNumber" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.PHONE_NUMBER_2' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.subPhoneNumber" type="text" class="form-control" name="subPhoneNumber" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_PHONE_NUMBER_2' | translate}}"
                                        maxlength="25" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label for="origin" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.BIRTHPLACE' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.origin" type="text" class="form-control" name="origin" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_BIRTHPLACE' | translate}}"
                                        maxlength="45" />
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="email" class="col-sm-4 control-label required" ng-bind="'LABEL.RESIDENT.EMAIL' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.email" type="email" class="form-control" name="email" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_EMAIL' | translate}}"
                                        maxlength="255" required />
                                    <div class="box-validate">
                                        <div ng-show="formApp.email.$dirty && formApp.email.$invalid" class="text-danger">
                                            <i class="fa fa-times text-danger"></i>
                                            <span ng-show="formApp.email.$error.required" ng-bind="'SYSTEM.ERROR.REQUIRED' | translate"></span>
                                            <span ng-show="formApp.email.$error.email" ng-bind="'SYSTEM.ERROR.EMAIL' | translate"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label for="email2" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.EMAIL' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.email2" type="text" class="form-control" name="email2" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_EMAIL' | translate}}"
                                        maxlength="255" />
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <label for="userName" class="col-sm-4 control-label" ng-bind="'LABEL.RESIDENT.ACCOUNT' |translate"></label>
                                <div class="col-sm-8">
                                    <input ng-model="ctrl.resident.userName" type="text" class="form-control" name="userName" placeholder="{{'LABEL.RESIDENT.PLACE_HOLDER_ACCOUNT' | translate}}"
                                        maxlength="50" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table table-stripped table-hover header-fixed">
                    <thead>
                        <tr>
                            <th class="col6">{{ 'LABEL.COMMON.APARTMENT' | translate }}</th>
                            <th class="col6">{{ 'LABEL.RESIDENT.ROLE' | translate }}</th>
                            <th class="col6">{{ 'LABEL.RESIDENT.RELATIONSHIP' | translate }}</th>
                            <th class="col6 text-center">{{ 'LABEL.RESIDENT.STAYING' | translate }}</th>
                            <th class="col6 text-center">{{ 'LABEL.RESIDENT.RECEIVE_NOTIFICATION' | translate }}</th>
                            <th class="col6 text-center">{{ 'LABEL.COMMON.ACTION' | translate }}</th>
                        </tr>
                    </thead>
                    <tbody style="max-height: 100px">
                        <tr ng-repeat="apartment in ctrl.resident.listResidentApartment">
                            <td class="col6">
                                <input type="hidden" ng-model="apartment.apartmentId" /> {{apartment.name}}
                            </td>
                            <td class="col6">
                                <sm-resident-type ng-value="apartment.residentType" />
                            </td>
                            <td class="col6">
                                <sm-resident-relationship ng-value="apartment.relationship" />
                                <!-- {{apartment.relationship}} -->
                            </td>
                            <td class="col6 text-center">
                                <sm-yes-no ng-value="apartment.staying" />
                            </td>
                            <td class="col6 text-center">
                                <sm-yes-no ng-value="apartment.receiveNotification" />
                            </td>
                            <td class="col6 text-center" class="text-center">
                                <button type="button" class="btn btn-danger btn-xs" ng-click="ctrl.onRemoveApartment($index)">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td class="col6">
                                <div class="form-group-sm">
                                    <ui-select ng-model="ctrl.apartment" theme="bootstrap">
                                        <ui-select-match placeholder="{{'LABEL.APARTMENT.SEARCH_MIN_3' | translate}}">{{$select.selected.name}}</ui-select-match>
                                        <ui-select-choices refresh="ctrl.refreshApartments($select.search)" refresh-delay="500" repeat="item in ctrl.availableApartments">
                                            <small>{{item.name}}</small>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </td>
                            <td class="col6">
                                <sm-resident-type ng-model="ctrl.residentApartment.residentType" ng-change="ctrl.onResidentTypeChange()"  sm-class="form-control input-sm" sm-input="true" />
                            </td>
                            <td class="col6">
                                <sm-resident-relationship  ng-model="ctrl.residentApartment.relationship" sm-class="form-control input-sm" sm-input="true" />
                            </td>
                            <td class="col6">
                                <input type="checkbox" ng-model="ctrl.residentApartment.staying" ng-true-value="'YES'" ng-false-value="'NO'">
                            </td>
                            <td class="col6">
                                <input type="checkbox" ng-model="ctrl.residentApartment.receiveNotification"  ng-true-value="'YES'" ng-false-value="'NO'" ng-checked="ctrl.residentApartment.residentType == 'OWNER'" ng-disabled="ctrl.residentApartment.residentType == 'OWNER'">
                            </td>
                            <td class="col6 text-center">
                                <button type="button" class="btn btn-primary btn-xs" ng-click="ctrl.onAddApartment()">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </form>
        </div>
    </div>
</section>
<!-- /.content -->